const express = require('express');const app = express();const port = 3000;app.use(express.json());let cardData = [];app.get('/health', (req, res) => res.json({ status: 'ok' }));app.post('/getCard', (req, res) => {const { nickname, phone = '' } = req.body;if (!nickname) return res.json({ code: -1, msg: '请输入昵称' });const hasCard = cardData.some(item => item.nickname === nickname);if (hasCard) return res.json({ code: 0, msg: '已领取过会员卡', data: { hasCard: true } });cardData.push({ nickname, phone, createTime: new Date().toLocaleString() });res.json({ code: 0, msg: '领取成功', data: { hasCard: true } });});app.get('/checkCard', (req, res) => {const { nickname } = req.query;if (!nickname) return res.json({ code: -1, msg: '请输入昵称' });const hasCard = cardData.some(item => item.nickname === nickname);res.json({ code: 0, data: { hasCard } });});app.listen(port, () => console.log(Server running on port ${port}));
